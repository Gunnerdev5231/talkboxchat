<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Chat App with Firebase Authentication</title>
</head>
<body>

    <div id="userAuth">
        <input type="email" id="emailInput" placeholder="Email">
        <input type="password" id="passwordInput" placeholder="Password">
        <button onclick="register()">Register</button>
        <button onclick="login()">Login</button>
        <button onclick="logout()" style="display:none;" id="logoutBtn">Logout</button>
    </div>

    <div id="chat" style="display:none;">
        <div id="messages"></div>
        <input type="text" id="messageInput" placeholder="Type your message here...">
        <button id="sendBtn">Send</button>
    </div>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>

    <script>
      // TODO: Replace the following with your app's Firebase project configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyA1q2CABQm0DWVAMp_yCyiizt0tvIjHbAc",
        authDomain: "talkboxchat-20646.firebaseapp.com",
        projectId: "talkboxchat-20646",
        storageBucket: "talkboxchat-20646.appspot.com",
        messagingSenderId: "955786253919",
        appId: "1:955786253919:web:de275445450e7092b9edea",
        measurementId: "G-5TZC4YEY69"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // Reference to the auth service
      const auth = firebase.auth();

      function register() {
        const email = document.getElementById('emailInput').value;
        const password = document.getElementById('passwordInput').value;

        auth.createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            console.log('User created and signed in!');
          })
          .catch((error) => {
            console.error('Error signing up:', error.message);
          });
      }

      function login() {
        const email = document.getElementById('emailInput').value;
        const password = document.getElementById('passwordInput').value;

        auth.signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            console.log('User signed in!');
          })
          .catch((error) => {
            console.error('Error signing in:', error.message);
          });
      }

      function logout() {
        auth.signOut().then(() => {
          console.log('User signed out!');
        });
      }

      auth.onAuthStateChanged((user) => {
        if (user) {
          // User is signed in, show the chat UI
          document.getElementById('chat').style.display = 'block';
          document.getElementById('userAuth').style.display = 'none';
        } else {
          // User is signed out, show the login/register UI
          document.getElementById('chat').style.display = 'none';
          document.getElementById('userAuth').style.display = 'block';
        }
      });
    </script>
</body>
</html>

